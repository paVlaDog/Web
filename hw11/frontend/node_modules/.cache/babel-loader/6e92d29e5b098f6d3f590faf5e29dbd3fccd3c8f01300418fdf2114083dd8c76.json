{"ast":null,"code":"import Article from \"../utilComp/Article\";\nimport Comment from \"@/components/utilComp/Comment\";\nexport default {\n  name: \"Post\",\n  props: [\"user\", \"post\", \"comments\"],\n  components: {\n    Comment,\n    Article\n  },\n  data: function () {\n    return {\n      text: \"\",\n      error: \"\"\n    };\n  },\n  methods: {\n    commentsById: function (postId) {\n      return Object.values(this.comments).filter(c => c.postId === postId);\n    },\n    commentsCount: function (postId) {\n      return this.commentsById(postId).length;\n    }\n    // onWriteComment: function () {\n    //   this.error = \"\";\n    //   this.$root.$emit(\"onWriteComment\", this.text, this.post.id);\n    // }\n  },\n\n  beforeCreate() {\n    this.$root.$on(\"onWriteCommentValidationError\", error => this.error = error);\n  }\n};","map":{"version":3,"mappings":"AA6BA;AACA;AAEA;EACAA;EACAC;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;IACA;IACA;IACA;EACA;;EACAC;IACA;EACA;AACA","names":["name","props","components","Comment","Article","data","text","error","methods","commentsById","commentsCount","beforeCreate"],"sourceRoot":"src/components/page","sources":["Post.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <Article :post=\"post\" :userLogin=\"post.user.login\" :commentsCount=\"commentsCount(post.id)\"/>\r\n    <Comment v-for=\"comment in commentsById(post.id)\" :comment=\"comment\" :userLogin=\"userLogin(comment.userId)\" :key=\"comment.id\"/>\r\n\r\n    <div v-if=\"user.login\" class=\"form\" style=\"margin-top: 10px\">\r\n      <div class=\"header\">Your comment:</div>\r\n      <div class=\"body\">\r\n        <form @submit.prevent=\"onWriteComment\">\r\n          <div class=\"field\">\r\n            <div class=\"name\">\r\n              <label for=\"text\">Text</label>\r\n            </div>\r\n            <div class=\"value\">\r\n              <textarea id=\"text\" name=\"text\" v-model=\"text\"></textarea>\r\n            </div>\r\n          </div>\r\n          <div class=\"error\">{{ error }}</div>\r\n          <div class=\"button-field\">\r\n            <input type=\"submit\" value=\"Write\">\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport Article from \"../utilComp/Article\";\r\nimport Comment from \"@/components/utilComp/Comment\";\r\n\r\nexport default {\r\n    name: \"Post\",\r\n    props: [\"user\",\"post\", \"comments\"],\r\n    components: {\r\n      Comment,\r\n      Article\r\n    },\r\n    data: function () {\r\n      return {\r\n        text: \"\",\r\n        error: \"\"\r\n      }\r\n    },\r\n    methods: {\r\n      commentsById: function (postId) {\r\n        return Object.values(this.comments).filter(c => c.postId === postId);\r\n      },\r\n      commentsCount: function (postId) {\r\n        return this.commentsById(postId).length;\r\n      },\r\n      // onWriteComment: function () {\r\n      //   this.error = \"\";\r\n      //   this.$root.$emit(\"onWriteComment\", this.text, this.post.id);\r\n      // }\r\n    },\r\n    beforeCreate() {\r\n      this.$root.$on(\"onWriteCommentValidationError\", (error) => this.error = error);\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}